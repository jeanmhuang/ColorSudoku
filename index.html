<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coquette Color Sudoku â€” 6Ã—6</title>
  <meta name="description" content="One vivid pastel 6Ã—6 Color Sudoku by Airy Fairy Press. Fill each row, column, and 2Ã—3 block with each color once.">
  <link rel="icon" type="image/png" href="https://jeanmhuang.github.io/ColorSudoku/thumbnail.jpg">
  <meta property="og:title" content="Coquette Color Sudoku â€” 6Ã—6">
  <meta property="og:description" content="Play a bright, cheerful 6Ã—6 Color Sudoku right in your browser.">
  <meta property="og:image" content="https://jeanmhuang.github.io/ColorSudoku/thumbnail.jpg">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,500&family=DM+Serif+Display&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fff7fa;--card:#ffffff;--ink:#2a2a2a;--muted:#7a5b6d;--border:#f0b8d1;--accent:#e0618d;--ring:#ff9ebc;--invalid:#ff4e4e;--valid:#4ac37f;
      --C1:#ff9fc2;--C2:#ffc187;--C3:#ffeb62;--C4:#9ef5a3;--C5:#8dd3ff;--C6:#c5a0ff;
    }
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Playfair Display',serif;display:flex;justify-content:center;padding:24px}
    .wrap{width:min(900px,100%);background:var(--card);border:2px solid var(--border);border-radius:18px;box-shadow:0 12px 40px rgba(228,106,146,.25);padding:20px;margin-top:24px}
    h1{text-align:center;color:var(--accent);font-family:'DM Serif Display',serif;font-size:2.6em;letter-spacing:0.4px;margin-bottom:0.3em;text-shadow:0 0 8px rgba(255,180,200,.25)}
    .grid{display:grid;grid-template-columns:repeat(6,1fr);border:2px solid var(--border);border-radius:14px;overflow:hidden;margin-top:10px}
    .cell{aspect-ratio:1/1;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:box-shadow .15s ease,font-size .2s;font-family:'Playfair Display',serif;font-size:15px}
    .cell.err{box-shadow:0 0 0 3px var(--invalid) inset}
    .controls{display:flex;gap:10px;margin-top:12px;justify-content:center;font-family:'DM Serif Display',serif}
    button{border:1px solid var(--border);background:#fff;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;font-family:'DM Serif Display',serif;color:#000;transition:all .2s ease}
    button:hover{box-shadow:0 8px 20px rgba(228,106,146,.25);transform:translateY(-1px)}
    .legend{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px;font-family:'Playfair Display',serif}
    .swatch{display:flex;align-items:center;gap:8px;border:1px solid var(--border);padding:8px;border-radius:8px;cursor:pointer;font-family:'Playfair Display',serif;background-color:#fff;transition:all .2s ease}
    .swatch:hover{background-color:rgba(255,230,240,.6)}
    .chip{width:22px;height:22px;border-radius:6px;border:1px solid rgba(0,0,0,.08)}
    .active{box-shadow:0 0 0 3px var(--ring) inset}
    .visitor{margin-top:16px;text-align:center;font-size:15px;color:var(--muted);font-family:'Playfair Display',serif}
    .instructions{text-align:center;font-family:'Playfair Display',serif;font-size:17px;color:#000;margin-top:12px;line-height:1.5em}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Coquette Color Sudoku (6Ã—6)</h1>
    <div id="grid" class="grid"></div>
    <p class="instructions">Click a color below, then click squares to fill the grid. Each color can appear only once in every row, column, and 2Ã—3 block.</p>
    <div class="legend" id="legend"></div>
    <div class="controls">
      <button id="btnNew">ðŸ§© New</button>
      <button id="btnReset">â†º Reset</button>
      <button id="btnCheck">âœ”ï¸Ž Check</button>
      <button id="btnHint">ðŸ’¡ Hint</button>
      <button id="btnSolve">âœ¨ Solve</button>
    </div>
    <div class="visitor">Visitor Counter: <img src="https://visitor-badge.laobi.icu/badge?page_id=jeanmhuang.ColorSudoku" alt="Visitors" /></div>
  </div>

  <script>
    const COLORS=[null,{name:'rose',css:'var(--C1)'},{name:'peach',css:'var(--C2)'},{name:'lemon',css:'var(--C3)'},{name:'mint',css:'var(--C4)'},{name:'sky',css:'var(--C5)'},{name:'lilac',css:'var(--C6)'}];
    const gridEl=document.getElementById('grid');
    const legendEl=document.getElementById('legend');

    let solution=null,startGrid=null,current=null,fixed=null,activeColor=1;

    function shuffle(a){return a.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);}
    function baseSolved(){const N=6,rBase=2,cBase=3;return Array.from({length:N},(_,r)=>Array.from({length:N},(_,c)=>((r*cBase+Math.floor(r/rBase)+c)%N)+1));}
    function randomSolved(){
      let g = baseSolved();
      const N=6, rBase=2, cBase=3;
      const bandOrder = shuffle([0,1,2]);
      const rowsShuffled = [];
      for(const b of bandOrder){
        const rowsInBand = [b*rBase, b*rBase+1];
        const perm = shuffle(rowsInBand);
        for(const r of perm) rowsShuffled.push(g[r]);
      }
      g = rowsShuffled;
      const stackOrder = shuffle([0,1]);
      const g2 = Array.from({length:N},()=>Array(N).fill(0));
      let destCol = 0;
      for(const s of stackOrder){
        const colsInStack = [s*cBase, s*cBase+1, s*cBase+2];
        const perm = shuffle(colsInStack);
        for(const sc of perm){
          for(let r=0;r<N;r++) g2[r][destCol] = g[r][sc];
          destCol++;
        }
      }
      g = g2;
      const map = shuffle([1,2,3,4,5,6]);
      g = g.map(row=>row.map(v=>map[v-1]));
      return g;
    }
    function makeMask(n){const N=6,m=Array.from({length:N},()=>Array(N).fill(false));const cells=shuffle(Array.from({length:N*N},(_,i)=>[Math.floor(i/N),i%N]));for(let i=0;i<n;i++){const[r,c]=cells[i];m[r][c]=true;}return m;}

    function generatePuzzle(){solution=randomSolved();const mask=makeMask(18+Math.floor(Math.random()*3));startGrid=solution.map((r,ri)=>r.map((v,ci)=>mask[ri][ci]?v:0));current=startGrid.map(r=>r.slice());fixed=startGrid.map(r=>r.map(v=>v!==0));renderBoard();renderLegend();}

    function renderBoard(){gridEl.innerHTML='';for(let r=0;r<6;r++){for(let c=0;c<6;c++){const v=current[r][c];const d=document.createElement('div');d.className='cell';if(fixed[r][c])d.classList.add('fixed');d.style.background=v?COLORS[v].css:'#fff';d.addEventListener('click',()=>{if(!fixed[r][c]){current[r][c]=activeColor;renderBoard();}});gridEl.appendChild(d);}}}

    function renderLegend(){legendEl.innerHTML='';for(let i=1;i<=6;i++){const sw=document.createElement('div');sw.className='swatch'+(activeColor===i?' active':'');const chip=document.createElement('div');chip.className='chip';chip.style.background=COLORS[i].css;const label=document.createElement('span');label.textContent=COLORS[i].name;sw.appendChild(chip);sw.appendChild(label);sw.addEventListener('click',()=>{activeColor=i;renderLegend();});legendEl.appendChild(sw);}}

    function highlightErrors(){
      const cells=[...gridEl.children];
      cells.forEach(c=>c.classList.remove('err'));
      for(let i=0;i<6;i++){
        const row=current[i];
        const col=current.map(r=>r[i]);
        const markRow=new Set(), markCol=new Set();
        for(let a=0;a<6;a++){
          for(let b=a+1;b<6;b++){
            if(row[a]!==0 && row[a]===row[b]){ markRow.add(a); markRow.add(b); }
            if(col[a]!==0 && col[a]===col[b]){ markCol.add(a); markCol.add(b); }
          }
        }
        for(const c of markRow) cells[i*6+c].classList.add('err');
        for(const r of markCol) cells[r*6+i].classList.add('err');
      }
      for(let br=0;br<3;br++){
        for(let bc=0;bc<2;bc++){
          const idxs=[]; const vals=[];
          for(let r=br*2;r<br*2+2;r++){
            for(let c=bc*3;c<bc*3+3;c++){
              idxs.push([r,c]); vals.push(current[r][c]);
            }
          }
          for(let a=0;a<vals.length;a++){
            for(let b=a+1;b<vals.length;b++){
              if(vals[a]!==0 && vals[a]===vals[b]){
                const [r1,c1]=idxs[a], [r2,c2]=idxs[b];
                cells[r1*6+c1].classList.add('err');
                cells[r2*6+c2].classList.add('err');
              }
            }
          }
        }
      }
    }

    function check(){ highlightErrors(); }

    function hint(){
      if(!solution || !current || !fixed) return;
      const open=[];
      for(let r=0;r<6;r++){
        for(let c=0;c<6;c++){
          if(!fixed[r][c] && current[r][c]!==solution[r][c]) open.push([r,c]);
        }
      }
      if(open.length===0) return;
      const [r,c]=open[Math.floor(Math.random()*open.length)];
      current[r][c]=solution[r][c];
      renderBoard();
      const cells=[...gridEl.children];
      const idx=r*6+c; const cell=cells[idx];
      cell.style.boxShadow='0 0 0 3px var(--ring) inset';
      setTimeout(()=>{ cell.style.boxShadow=''; }, 600);
    }

    document.getElementById('btnNew').addEventListener('click',generatePuzzle);
    document.getElementById('btnCheck').addEventListener('click',check);
    document.getElementById('btnHint').addEventListener('click', hint);
    document.getElementById('btnSolve').addEventListener('click',()=>{current=solution.map(r=>r.slice());renderBoard();});
    document.getElementById('btnReset').addEventListener('click',()=>{ current = startGrid.map(r=>r.slice()); renderBoard(); });

    generatePuzzle();
  </script>
</body>
</html>


