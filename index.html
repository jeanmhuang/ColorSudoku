<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coquette Color Sudoku â€” 6Ã—6</title>
  <meta name="description" content="One soothing 6Ã—6 Color Sudoku by Airy Fairy Press. Fill each row, column, and 2Ã—3 block with each color once.">
  <!-- Favicon & Social Preview -->
  <link rel="icon" href="https://raw.githubusercontent.com/jeanmhuang/ColorSudoku/main/thumbnail.jpg">
  <meta property="og:title" content="Coquette Color Sudoku â€” 6Ã—6">
  <meta property="og:description" content="Play a pastel 6Ã—6 Color Sudoku right in your browser.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://raw.githubusercontent.com/jeanmhuang/ColorSudoku/main/thumbnail.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/jeanmhuang/ColorSudoku/main/thumbnail.jpg">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,500&family=DM+Serif+Display&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fff9fc; --card:#ffffff; --ink:#2f2f2f; --muted:#8c8c8c;
      --border:#f1d9e5; --accent:#d97fa4; --ring:#ff8fb3; --invalid:#ff6b6b; --valid:#3fc07a;
      --C1:#ffb7d5; --C2:#ffd1a6; --C3:#fff477; --C4:#b8f7b8; --C5:#aee0ff; --C6:#d6b8ff;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Playfair Display',serif;display:flex;align-items:flex-start;justify-content:center;padding:24px;font-size:17px;line-height:1.5}
    .wrap{width:min(900px,100%);background:var(--card);border:2px solid var(--border);border-radius:16px;box-shadow:0 10px 30px rgba(180,120,150,.18);padding:16px;margin-top:20px}
    h1{text-align:center;color:var(--accent);font-family:'DM Serif Display',serif;font-size:2.3em;letter-spacing:0.4px;margin-bottom:0.2em}
    h2.subtitle{text-align:center;color:var(--muted);font-family:'Playfair Display',serif;font-style:italic;font-size:1em;margin-top:0;margin-bottom:1em}
    h3{font-family:'Playfair Display',serif;color:var(--accent);font-weight:600;margin-bottom:0.5em;text-align:center}
    .grid{display:grid;grid-template-columns:repeat(6,1fr);border:2px solid var(--border);border-radius:12px;overflow:hidden;margin-top:10px}
    .cell{aspect-ratio:1/1;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:box-shadow .15s ease;font-family:'Playfair Display',serif;font-size:15px}
    .cell.fixed{cursor:default}
    .cell.err{box-shadow:0 0 0 3px var(--invalid) inset}
    .k{font:600 12px/1 'Playfair Display',serif;opacity:.7;color:#333}
    .cell[data-r="1"], .cell[data-r="3"], .cell[data-r="5"]{border-top-width:2px}
    .cell[data-c="1"], .cell[data-c="3"], .cell[data-c="5"]{border-left-width:2px}
    aside{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff;margin-top:12px;font-family:'Playfair Display',serif}
    .legend{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .swatch{display:flex;align-items:center;gap:8px;border:1px solid var(--border);padding:8px 10px;border-radius:10px;cursor:pointer;font-family:'Playfair Display',serif;font-size:15px}
    .chip{width:22px;height:22px;border-radius:6px;border:1px solid rgba(0,0,0,.08)}
    .active{box-shadow:0 0 0 3px var(--ring) inset}
    .controls{display:flex;gap:8px;margin-top:10px;justify-content:center;font-family:'Playfair Display',serif}
    button{border:1px solid var(--border);background:#fff;padding:10px 12px;border-radius:10px;font-weight:600;cursor:pointer;font-family:'Playfair Display',serif;letter-spacing:0.3px}
    button:hover{box-shadow:0 8px 20px rgba(180,120,150,.18)}
    .visitor{margin-top:14px;text-align:center;font-size:15px;color:var(--muted);font-family:'Playfair Display',serif}
    .visitor strong{color:var(--ink)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Coquette Color Sudoku (6Ã—6)</h1>
    <h2 class="subtitle">Click a color then fill each cell â€” no keyboard needed.</h2>
    <div id="grid" class="grid"></div>
    <aside>
      <h3>Palette</h3>
      <div id="legend" class="legend"></div>
      <div class="controls">
        <button id="btnNew">ðŸ§© New Game</button>
        <button id="btnClear">â†º Reset</button>
        <button id="btnCheck">âœ”ï¸Ž Check</button>
        <button id="btnHint">ðŸ’¡ Hint</button>
        <button id="btnSolve">âœ¨ Solve</button>
      </div>
      <p style="font-size:15px;color:var(--muted);margin-top:8px;font-family:'Playfair Display',serif">R=Rose, O=Peach, Y=Lemon, G=Mint, B=Sky, P=Lilac.</p>
    </aside>
    <div class="visitor">Visitor Counter: <img src="https://visitor-badge.laobi.icu/badge?page_id=jeanmhuang.ColorSudoku" alt="Visitors" /></div>
  </div>

  <script>
    const COLORS=[null,{key:'R',name:'Rose',css:'var(--C1)'},{key:'O',name:'Peach',css:'var(--C2)'},{key:'Y',name:'Lemon',css:'var(--C3)'},{key:'G',name:'Mint',css:'var(--C4)'},{key:'B',name:'Sky',css:'var(--C5)'},{key:'P',name:'Lilac',css:'var(--C6)'}];

    let solution = null; // 6x6 solved grid (numbers 1..6)
    let startGrid = null; // starting puzzle with 0 for empty
    let current = null;   // player's current grid
    let fixed = null;     // boolean mask for givens
    let activeColor = 1;
    // Cache DOM nodes (fixes 'game didn't load' due to missing refs)
    const gridEl = document.getElementById('grid');
    const legendEl = document.getElementById('legend');
    function clone(m){return m.map(r=>r.slice());}

    // ======== 6x6 Sudoku generator (2x3 blocks) ========
    function baseSolved(){
      const N=6; const rBase=2, cBase=3; // blocks 2x3
      const grid = Array.from({length:N}, (_,r)=>Array.from({length:N},(_,c)=> ((r*cBase + Math.floor(r/rBase) + c) % N) + 1));
      return grid;
    }
    function shuffle(arr){ return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(p=>p[1]); }
    function permuteRows(g){
      const N=6, rBase=2; const bands=[0,1,2];
      const bandOrder = shuffle(bands);
      const out=[];
      for(const b of bandOrder){
        const rowsInBand = [b*rBase, b*rBase+1];
        const perm = shuffle(rowsInBand);
        for(const r of perm) out.push(g[r]);
      }
      return out;
    }
    function permuteCols(g){
      const N=6, cBase=3; const stacks=[0,1];
      const stackOrder = shuffle(stacks);
      const out = Array.from({length:N},()=>Array(N).fill(0));
      let destCol=0;
      for(const s of stackOrder){
        const colsInStack = [s*cBase, s*cBase+1, s*cBase+2];
        const perm = shuffle(colsInStack);
        for(const sc of perm){
          for(let r=0;r<N;r++) out[r][destCol] = g[r][sc];
          destCol++;
        }
      }
      return out;
    }
    function relabel(g){
      const N=6; const nums=[1,2,3,4,5,6]; const map = shuffle(nums);
      return g.map(row=>row.map(v=>map[v-1]));
    }
    function randomSolved(){
      let g = baseSolved();
      g = permuteRows(g);
      g = permuteCols(g);
      g = relabel(g);
      return g;
    }
    function makeMask(clues=18){
      const N=6; const mask = Array.from({length:N},()=>Array(N).fill(false));
      const rowCount = Array(N).fill(0), colCount = Array(N).fill(0);
      // Ensure at least one clue per row
      for(let r=0;r<N;r++){
        const c = Math.floor(Math.random()*N);
        if(!mask[r][c]){ mask[r][c]=true; rowCount[r]++; colCount[c]++; }
      }
      // Ensure at least one clue per column
      for(let c=0;c<N;c++) if(colCount[c]===0){ const r=Math.floor(Math.random()*N); if(!mask[r][c]){ mask[r][c]=true; rowCount[r]++; colCount[c]++; } }
      let count = rowCount.reduce((a,b)=>a+b,0);
      // Add random clues until reaching target
      const cells = shuffle(Array.from({length:N*N},(_,i)=>[Math.floor(i/N), i%N]));
      for(const [r,c] of cells){ if(count>=clues) break; if(!mask[r][c]){ mask[r][c]=true; count++; } }
      return mask;
    }
    function generatePuzzle(){
      solution = randomSolved();
      const mask = makeMask(18 + Math.floor(Math.random()*3)); // 18â€“20 clues (a bit harder, still friendly)
      startGrid = solution.map((row,r)=>row.map((v,c)=> mask[r][c]? v : 0));
      current = clone(startGrid);
      fixed = startGrid.map(r=>r.map(v=>v!==0));
    }
    function load(){
      generatePuzzle();
      renderBoard();
      renderLegend();
    }
    function renderBoard(){gridEl.innerHTML='';for(let r=0;r<6;r++){for(let c=0;c<6;c++){const v=current[r][c];const d=document.createElement('div');d.className='cell'+(fixed[r][c]?' fixed':'');d.dataset.r=r+1;d.dataset.c=c+1;d.style.background=v?COLORS[v].css:'#fff';if(v){const k=document.createElement('div');k.className='k';k.textContent=COLORS[v].key;d.appendChild(k);}d.addEventListener('click',()=>handleCell(r,c));gridEl.appendChild(d);}}highlightErrors();}
    function renderLegend(){legendEl.innerHTML='';for(let i=1;i<=6;i++){const sw=document.createElement('div');sw.className='swatch'+(activeColor===i?' active':'');sw.addEventListener('click',()=>{activeColor=i;renderLegend();});const chip=document.createElement('div');chip.className='chip';chip.style.background=COLORS[i].css;const txt=document.createElement('div');txt.innerHTML=`<strong>${COLORS[i].key}</strong> ${COLORS[i].name}`;sw.appendChild(chip);sw.appendChild(txt);legendEl.appendChild(sw);}}
    function handleCell(r,c){if(fixed[r][c])return;const cur=current[r][c];current[r][c]=(cur===activeColor)?0:activeColor;renderBoard();}
    function uniqueOK(arr){const s=new Set();for(const v of arr){if(v===0)continue;if(s.has(v))return false;s.add(v);}return true;}
    function highlightErrors(){const cells=[...gridEl.children];cells.forEach(c=>c.classList.remove('err'));let bad=false;for(let i=0;i<6;i++){const row=current[i];const col=current.map(r=>r[i]);if(!uniqueOK(row)){bad=true;for(let c=0;c<6;c++)cells[i*6+c].classList.add('err');}if(!uniqueOK(col)){bad=true;for(let r=0;r<6;r++)cells[r*6+i].classList.add('err');}}for(let br=0;br<3;br++){for(let bc=0;bc<2;bc++){const items=[];for(let r=br*2;r<br*2+2;r++)for(let c=bc*3;c<bc*3+3;c++)items.push({r,c,v:current[r][c]});if(!uniqueOK(items.map(x=>x.v))){bad=true;items.forEach(({r,c})=>cells[r*6+c].classList.add('err'));}}}return !bad;}
    function check(){highlightErrors();}
    function hint(){
      const open=[];
      for(let r=0;r<6;r++) for(let c=0;c<6;c++) if(!fixed[r][c] && current[r][c]!==solution[r][c]) open.push([r,c]);
      if(!open.length) return;
      const [r,c]=open[Math.floor(Math.random()*open.length)];
      current[r][c]=solution[r][c];
      renderBoard();
    }
    function solve(){ current = clone(solution); renderBoard(); }
    function clearBoard(){ current = clone(startGrid); renderBoard(); }
    document.getElementById('btnNew').addEventListener('click', ()=>{ generatePuzzle(); renderBoard(); });
    document.getElementById('btnClear').addEventListener('click',clearBoard);document.getElementById('btnCheck').addEventListener('click',check);document.getElementById('btnHint').addEventListener('click',hint);document.getElementById('btnSolve').addEventListener('click',solve);
    load();
  </script>
</body>
</html>

